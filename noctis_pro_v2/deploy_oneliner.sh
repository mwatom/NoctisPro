#!/bin/bash
# ğŸš€ NoctisPro V2 - One-Line Production Deployment
echo "ğŸš€ Deploying NoctisPro V2..." && cd /workspace/noctis_pro_v2 && python3 -m venv venv && source venv/bin/activate && pip install -r requirements.txt && python manage.py migrate --noinput && python manage.py collectstatic --noinput && python manage.py shell -c "from apps.accounts.models import User; User.objects.filter(username='admin').exists() or User.objects.create_superuser('admin', 'admin@noctispro.com', 'admin123')" && python manage.py shell -c "from apps.worklist.models import Patient, Study, Modality; from datetime import date, time; [Modality.objects.get_or_create(code=mod, defaults={'name': f'{mod} Imaging'}) for mod in ['CT', 'MR', 'XR', 'US', 'DX']]; Patient.objects.exists() or (lambda: [Patient.objects.create(patient_id='P001', patient_name='John Doe', date_of_birth=date(1980, 1, 1), sex='M'), Study.objects.create(study_instance_uid='1.2.3.4.5.6.7.8.9.0', patient=Patient.objects.first(), study_date=date.today(), study_time=time(10, 30), study_description='CT Chest without contrast', accession_number='ACC001', referring_physician='Dr. Smith', modality=Modality.objects.get(code='CT'), status='completed')])() or print('Sample data created')" && echo "âœ… NoctisPro V2 deployed successfully!" && echo "ğŸŒ Start server: python manage.py runserver 0.0.0.0:8000" && echo "ğŸŒ Start ngrok: /workspace/ngrok http 8000 --hostname=colt-charmed-lark.ngrok-free.app" && echo "ğŸ‘¤ Login: admin / admin123"