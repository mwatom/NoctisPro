#!/bin/bash
# ðŸš¨ ONE-LINE SURGEON DEPLOYMENT ðŸš¨
# Usage: ./SURGEON_DEPLOY_ONELINE.sh
echo "ðŸš¨ DEPLOYING NOCTIS PACS FOR SURGEON NOW!"; sudo lsof -ti:8000 | xargs -r sudo kill -9 2>/dev/null || true; [ ! -d "venv" ] && python3 -m venv venv; source venv/bin/activate; pip install --upgrade pip --quiet; pip install django pillow pydicom requests gunicorn whitenoise --quiet; export DEBUG=False ALLOWED_HOSTS="*,noctispro2.duckdns.org,*.duckdns.org,localhost" DJANGO_SETTINGS_MODULE="noctis_pro.settings"; python manage.py migrate --noinput; echo "from django.contrib.auth import get_user_model; User=get_user_model(); User.objects.filter(username='admin').exists() or User.objects.create_superuser('admin','admin@hospital.com','admin123')" | python manage.py shell; python manage.py collectstatic --noinput --clear 2>/dev/null || true; mkdir -p media/dicom staticfiles; echo "ðŸŽ‰ LIVE AT: http://noctispro2.duckdns.org:8000 | LOGIN: admin/admin123"; nohup python manage.py runserver 0.0.0.0:8000 > surgeon_pacs.log 2>&1 & echo "âœ… NOCTIS PACS RUNNING FOR SURGEON! PID: $!"