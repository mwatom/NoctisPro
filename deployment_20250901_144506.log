[1m[0;34m🚀 NoctisPro Bulletproof Production Deployment[0m
[0;34m[INFO][0m Deployment started at Mon Sep  1 02:45:06 PM UTC 2025
[0;34m[INFO][0m Log file: deployment_20250901_144506.log
[1m[0;34m🔍 Pre-deployment Validation[0m
[1;33m[WARNING][0m Running as root. This is acceptable for container environments.
[0;32m[SUCCESS][0m Python 3 found: Python 3.13.3
[0;32m[SUCCESS][0m All required files present
[0;32m[SUCCESS][0m Sufficient disk space available
[1m[0;34m🔧 Installing System Dependencies[0m
[0;34m[INFO][0m Updating package lists...

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

63 packages can be upgraded. Run 'apt list --upgradable' to see them.
[0;34m[INFO][0m Installing system packages...

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
python3 is already the newest version (3.13.3-1).
python3-pip is already the newest version (25.0+dfsg-1ubuntu0.1).
python3-venv is already the newest version (3.13.3-1).
python3.13-venv is already the newest version (3.13.3-1ubuntu0.3).
redis-server is already the newest version (5:7.0.15-3).
jq is already the newest version (1.7.1-3ubuntu1.1).
curl is already the newest version (8.12.1-3ubuntu1).
wget is already the newest version (1.24.5-2ubuntu1).
git is already the newest version (1:2.48.1-0ubuntu1.1).
build-essential is already the newest version (12.12ubuntu1).
libpq-dev is already the newest version (17.5-0ubuntu0.25.04.1).
libssl-dev is already the newest version (3.4.1-1ubuntu3).
libffi-dev is already the newest version (3.4.7-1).
libjpeg-dev is already the newest version (8c-2ubuntu11).
libpng-dev is already the newest version (1.6.47-1.1).
libfreetype-dev is already the newest version (2.13.3+dfsg-1).
liblcms2-dev is already the newest version (2.16-2).
libwebp-dev is already the newest version (1.5.0-0.1).
libtiff5-dev is already the newest version (4.5.1+git230720-4ubuntu4.1).
libopenjp2-7-dev is already the newest version (2.5.3-2).
zlib1g-dev is already the newest version (1:1.3.dfsg+really1.3.1-1ubuntu1).
cups is already the newest version (2.4.12-0ubuntu1).
cups-client is already the newest version (2.4.12-0ubuntu1).
cups-filters is already the newest version (2.0.1-0ubuntu3).
libcups2-dev is already the newest version (2.4.12-0ubuntu1).
Summary:
  Upgrading: 0, Installing: 0, Removing: 0, Not Upgrading: 63
[0;32m[SUCCESS][0m System dependencies installed
[0;34m[INFO][0m Installing ngrok...
[0;32m[SUCCESS][0m Ngrok installed successfully
[1m[0;34m📦 Creating Backup[0m
[0;32m[SUCCESS][0m Backup created at backup_20250901_144506
[1m[0;34m🔧 Setting up Services[0m
[0;32m[SUCCESS][0m Redis already running
[0;34m[INFO][0m Configuring CUPS printing service...
[0;32m[SUCCESS][0m CUPS printing service running
[1m[0;34m📚 Installing Dependencies[0m
[0;34m[INFO][0m Installing Python packages...
Requirement already satisfied: Django>=4.2.7 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 1)) (5.2.5)
Requirement already satisfied: djangorestframework>=3.14.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 2)) (3.16.1)
Requirement already satisfied: Pillow>=10.0.1 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 3)) (11.3.0)
Requirement already satisfied: numpy>=1.24.3 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 4)) (2.3.2)
Requirement already satisfied: pydicom>=2.4.3 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 5)) (3.0.1)
Requirement already satisfied: python-dotenv>=1.0.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 6)) (1.1.1)
Requirement already satisfied: django-cors-headers>=4.3.1 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 7)) (4.7.0)
Requirement already satisfied: channels>=4.0.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 8)) (4.3.1)
Requirement already satisfied: daphne>=4.0.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 9)) (4.2.1)
Requirement already satisfied: gunicorn>=21.2.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 10)) (23.0.0)
Requirement already satisfied: redis>=4.0.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 11)) (6.4.0)
Requirement already satisfied: scipy>=1.10.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 12)) (1.16.1)
Requirement already satisfied: matplotlib>=3.6.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 13)) (3.10.6)
Requirement already satisfied: scikit-image>=0.19.0 in ./venv/lib/python3.13/site-packages (from -r requirements.txt (line 14)) (0.25.2)
Requirement already satisfied: asgiref>=3.8.1 in ./venv/lib/python3.13/site-packages (from Django>=4.2.7->-r requirements.txt (line 1)) (3.9.1)
Requirement already satisfied: sqlparse>=0.3.1 in ./venv/lib/python3.13/site-packages (from Django>=4.2.7->-r requirements.txt (line 1)) (0.5.3)
Requirement already satisfied: autobahn>=22.4.2 in ./venv/lib/python3.13/site-packages (from daphne>=4.0.0->-r requirements.txt (line 9)) (24.4.2)
Requirement already satisfied: twisted>=22.4 in ./venv/lib/python3.13/site-packages (from twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (25.5.0)
Requirement already satisfied: packaging in ./venv/lib/python3.13/site-packages (from gunicorn>=21.2.0->-r requirements.txt (line 10)) (25.0)
Requirement already satisfied: contourpy>=1.0.1 in ./venv/lib/python3.13/site-packages (from matplotlib>=3.6.0->-r requirements.txt (line 13)) (1.3.3)
Requirement already satisfied: cycler>=0.10 in ./venv/lib/python3.13/site-packages (from matplotlib>=3.6.0->-r requirements.txt (line 13)) (0.12.1)
Requirement already satisfied: fonttools>=4.22.0 in ./venv/lib/python3.13/site-packages (from matplotlib>=3.6.0->-r requirements.txt (line 13)) (4.59.2)
Requirement already satisfied: kiwisolver>=1.3.1 in ./venv/lib/python3.13/site-packages (from matplotlib>=3.6.0->-r requirements.txt (line 13)) (1.4.9)
Requirement already satisfied: pyparsing>=2.3.1 in ./venv/lib/python3.13/site-packages (from matplotlib>=3.6.0->-r requirements.txt (line 13)) (3.2.3)
Requirement already satisfied: python-dateutil>=2.7 in ./venv/lib/python3.13/site-packages (from matplotlib>=3.6.0->-r requirements.txt (line 13)) (2.9.0.post0)
Requirement already satisfied: networkx>=3.0 in ./venv/lib/python3.13/site-packages (from scikit-image>=0.19.0->-r requirements.txt (line 14)) (3.5)
Requirement already satisfied: imageio!=2.35.0,>=2.33 in ./venv/lib/python3.13/site-packages (from scikit-image>=0.19.0->-r requirements.txt (line 14)) (2.37.0)
Requirement already satisfied: tifffile>=2022.8.12 in ./venv/lib/python3.13/site-packages (from scikit-image>=0.19.0->-r requirements.txt (line 14)) (2025.8.28)
Requirement already satisfied: lazy-loader>=0.4 in ./venv/lib/python3.13/site-packages (from scikit-image>=0.19.0->-r requirements.txt (line 14)) (0.4)
Requirement already satisfied: txaio>=21.2.1 in ./venv/lib/python3.13/site-packages (from autobahn>=22.4.2->daphne>=4.0.0->-r requirements.txt (line 9)) (25.6.1)
Requirement already satisfied: cryptography>=3.4.6 in ./venv/lib/python3.13/site-packages (from autobahn>=22.4.2->daphne>=4.0.0->-r requirements.txt (line 9)) (45.0.7)
Requirement already satisfied: hyperlink>=21.0.0 in ./venv/lib/python3.13/site-packages (from autobahn>=22.4.2->daphne>=4.0.0->-r requirements.txt (line 9)) (21.0.0)
Requirement already satisfied: setuptools in ./venv/lib/python3.13/site-packages (from autobahn>=22.4.2->daphne>=4.0.0->-r requirements.txt (line 9)) (80.9.0)
Requirement already satisfied: cffi>=1.14 in ./venv/lib/python3.13/site-packages (from cryptography>=3.4.6->autobahn>=22.4.2->daphne>=4.0.0->-r requirements.txt (line 9)) (1.17.1)
Requirement already satisfied: pycparser in ./venv/lib/python3.13/site-packages (from cffi>=1.14->cryptography>=3.4.6->autobahn>=22.4.2->daphne>=4.0.0->-r requirements.txt (line 9)) (2.22)
Requirement already satisfied: idna>=2.5 in ./venv/lib/python3.13/site-packages (from hyperlink>=21.0.0->autobahn>=22.4.2->daphne>=4.0.0->-r requirements.txt (line 9)) (3.10)
Requirement already satisfied: six>=1.5 in ./venv/lib/python3.13/site-packages (from python-dateutil>=2.7->matplotlib>=3.6.0->-r requirements.txt (line 13)) (1.17.0)
Requirement already satisfied: attrs>=22.2.0 in ./venv/lib/python3.13/site-packages (from twisted>=22.4->twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (25.3.0)
Requirement already satisfied: automat>=24.8.0 in ./venv/lib/python3.13/site-packages (from twisted>=22.4->twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (25.4.16)
Requirement already satisfied: constantly>=15.1 in ./venv/lib/python3.13/site-packages (from twisted>=22.4->twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (23.10.4)
Requirement already satisfied: incremental>=24.7.0 in ./venv/lib/python3.13/site-packages (from twisted>=22.4->twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (24.7.2)
Requirement already satisfied: typing-extensions>=4.2.0 in ./venv/lib/python3.13/site-packages (from twisted>=22.4->twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (4.15.0)
Requirement already satisfied: zope-interface>=5 in ./venv/lib/python3.13/site-packages (from twisted>=22.4->twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (7.2)
Requirement already satisfied: pyopenssl>=21.0.0 in ./venv/lib/python3.13/site-packages (from twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (25.1.0)
Requirement already satisfied: service-identity>=18.1.0 in ./venv/lib/python3.13/site-packages (from twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (24.2.0)
Requirement already satisfied: pyasn1 in ./venv/lib/python3.13/site-packages (from service-identity>=18.1.0->twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (0.6.1)
Requirement already satisfied: pyasn1-modules in ./venv/lib/python3.13/site-packages (from service-identity>=18.1.0->twisted[tls]>=22.4->daphne>=4.0.0->-r requirements.txt (line 9)) (0.4.2)
[0;32m[SUCCESS][0m Dependencies installed
[0;32m[SUCCESS][0m Critical packages verified
[1m[0;34m⚙️ Configuring Environment[0m
[0;32m[SUCCESS][0m Environment configured
[1m[0;34m🐍 Running Django Commands[0m
[0;34m[INFO][0m Skipping database migrations (no SQL database required)
[0;34m[INFO][0m Collecting static files...
Deleting 'rest_framework/img/glyphicons-halflings.png'
Deleting 'rest_framework/img/grid.png'
Deleting 'rest_framework/img/glyphicons-halflings-white.png'
Deleting 'rest_framework/docs/img/favicon.ico'
Deleting 'rest_framework/docs/img/grid.png'
Deleting 'rest_framework/docs/css/base.css'
Deleting 'rest_framework/docs/css/highlight.css'
Deleting 'rest_framework/docs/css/jquery.json-view.min.css'
Deleting 'rest_framework/docs/js/api.js'
Deleting 'rest_framework/docs/js/highlight.pack.js'
Deleting 'rest_framework/docs/js/jquery.json-view.min.js'
Deleting 'rest_framework/css/bootstrap-tweaks.css'
Deleting 'rest_framework/css/bootstrap-theme.min.css'
Deleting 'rest_framework/css/bootstrap.min.css'
Deleting 'rest_framework/css/bootstrap-theme.min.css.map'
Deleting 'rest_framework/css/bootstrap.min.css.map'
Deleting 'rest_framework/css/default.css'
Deleting 'rest_framework/css/font-awesome-4.0.3.css'
Deleting 'rest_framework/css/prettify.css'
Deleting 'rest_framework/js/ajax-form.js'
Deleting 'rest_framework/js/load-ajax-form.js'
Deleting 'rest_framework/js/jquery-3.7.1.min.js'
Deleting 'rest_framework/js/prettify-min.js'
Deleting 'rest_framework/js/default.js'
Deleting 'rest_framework/js/coreapi-0.1.1.js'
Deleting 'rest_framework/js/csrf.js'
Deleting 'rest_framework/js/bootstrap.min.js'
Deleting 'rest_framework/fonts/glyphicons-halflings-regular.woff'
Deleting 'rest_framework/fonts/glyphicons-halflings-regular.ttf'
Deleting 'rest_framework/fonts/glyphicons-halflings-regular.woff2'
Deleting 'rest_framework/fonts/fontawesome-webfont.svg'
Deleting 'rest_framework/fonts/glyphicons-halflings-regular.eot'
Deleting 'rest_framework/fonts/fontawesome-webfont.ttf'
Deleting 'rest_framework/fonts/glyphicons-halflings-regular.svg'
Deleting 'rest_framework/fonts/fontawesome-webfont.eot'
Deleting 'rest_framework/fonts/fontawesome-webfont.woff'
Deleting 'admin/img/search.svg'
Deleting 'admin/img/icon-calendar.svg'
Deleting 'admin/img/icon-yes.svg'
Deleting 'admin/img/icon-clock.svg'
Deleting 'admin/img/selector-icons.svg'
Deleting 'admin/img/icon-no.svg'
Deleting 'admin/img/sorting-icons.svg'
Deleting 'admin/img/icon-viewlink.svg'
Deleting 'admin/img/icon-alert.svg'
Deleting 'admin/img/icon-unknown.svg'
Deleting 'admin/img/tooltag-add.svg'
Deleting 'admin/img/icon-hidelink.svg'
Deleting 'admin/img/icon-deletelink.svg'
Deleting 'admin/img/LICENSE'
Deleting 'admin/img/README.txt'
Deleting 'admin/img/inline-delete.svg'
Deleting 'admin/img/calendar-icons.svg'
Deleting 'admin/img/icon-addlink.svg'
Deleting 'admin/img/icon-changelink.svg'
Deleting 'admin/img/icon-unknown-alt.svg'
Deleting 'admin/img/tooltag-arrowright.svg'
Deleting 'admin/img/gis/move_vertex_on.svg'
Deleting 'admin/img/gis/move_vertex_off.svg'
Deleting 'admin/css/base.css'
Deleting 'admin/css/forms.css'
Deleting 'admin/css/changelists.css'
Deleting 'admin/css/dark_mode.css'
Deleting 'admin/css/login.css'
Deleting 'admin/css/rtl.css'
Deleting 'admin/css/widgets.css'
Deleting 'admin/css/responsive_rtl.css'
Deleting 'admin/css/dashboard.css'
Deleting 'admin/css/unusable_password_field.css'
Deleting 'admin/css/nav_sidebar.css'
Deleting 'admin/css/responsive.css'
Deleting 'admin/css/autocomplete.css'
Deleting 'admin/css/vendor/select2/select2.css'
Deleting 'admin/css/vendor/select2/select2.min.css'
Deleting 'admin/css/vendor/select2/LICENSE-SELECT2.md'
Deleting 'admin/js/urlify.js'
Deleting 'admin/js/popup_response.js'
Deleting 'admin/js/cancel.js'
Deleting 'admin/js/nav_sidebar.js'
Deleting 'admin/js/SelectFilter2.js'
Deleting 'admin/js/calendar.js'
Deleting 'admin/js/prepopulate_init.js'
Deleting 'admin/js/jquery.init.js'
Deleting 'admin/js/inlines.js'
Deleting 'admin/js/filters.js'
Deleting 'admin/js/prepopulate.js'
Deleting 'admin/js/SelectBox.js'
Deleting 'admin/js/theme.js'
Deleting 'admin/js/change_form.js'
Deleting 'admin/js/unusable_password_field.js'
Deleting 'admin/js/core.js'
Deleting 'admin/js/autocomplete.js'
Deleting 'admin/js/actions.js'
Deleting 'admin/js/vendor/jquery/LICENSE.txt'
Deleting 'admin/js/vendor/jquery/jquery.min.js'
Deleting 'admin/js/vendor/jquery/jquery.js'
Deleting 'admin/js/vendor/select2/select2.full.min.js'
Deleting 'admin/js/vendor/select2/LICENSE.md'
Deleting 'admin/js/vendor/select2/select2.full.js'
Deleting 'admin/js/vendor/select2/i18n/fr.js'
Deleting 'admin/js/vendor/select2/i18n/et.js'
Deleting 'admin/js/vendor/select2/i18n/pt.js'
Deleting 'admin/js/vendor/select2/i18n/sl.js'
Deleting 'admin/js/vendor/select2/i18n/ko.js'
Deleting 'admin/js/vendor/select2/i18n/bs.js'
Deleting 'admin/js/vendor/select2/i18n/de.js'
Deleting 'admin/js/vendor/select2/i18n/hr.js'
Deleting 'admin/js/vendor/select2/i18n/it.js'
Deleting 'admin/js/vendor/select2/i18n/el.js'
Deleting 'admin/js/vendor/select2/i18n/ms.js'
Deleting 'admin/js/vendor/select2/i18n/ka.js'
Deleting 'admin/js/vendor/select2/i18n/fi.js'
Deleting 'admin/js/vendor/select2/i18n/sk.js'
Deleting 'admin/js/vendor/select2/i18n/sr.js'
Deleting 'admin/js/vendor/select2/i18n/is.js'
Deleting 'admin/js/vendor/select2/i18n/vi.js'
Deleting 'admin/js/vendor/select2/i18n/ro.js'
Deleting 'admin/js/vendor/select2/i18n/tr.js'
Deleting 'admin/js/vendor/select2/i18n/ar.js'
Deleting 'admin/js/vendor/select2/i18n/sq.js'
Deleting 'admin/js/vendor/select2/i18n/lv.js'
Deleting 'admin/js/vendor/select2/i18n/ru.js'
Deleting 'admin/js/vendor/select2/i18n/da.js'
Deleting 'admin/js/vendor/select2/i18n/en.js'
Deleting 'admin/js/vendor/select2/i18n/uk.js'
Deleting 'admin/js/vendor/select2/i18n/af.js'
Deleting 'admin/js/vendor/select2/i18n/he.js'
Deleting 'admin/js/vendor/select2/i18n/tk.js'
Deleting 'admin/js/vendor/select2/i18n/bn.js'
Deleting 'admin/js/vendor/select2/i18n/id.js'
Deleting 'admin/js/vendor/select2/i18n/fa.js'
Deleting 'admin/js/vendor/select2/i18n/hu.js'
Deleting 'admin/js/vendor/select2/i18n/bg.js'
Deleting 'admin/js/vendor/select2/i18n/es.js'
Deleting 'admin/js/vendor/select2/i18n/sv.js'
Deleting 'admin/js/vendor/select2/i18n/nl.js'
Deleting 'admin/js/vendor/select2/i18n/hsb.js'
Deleting 'admin/js/vendor/select2/i18n/az.js'
Deleting 'admin/js/vendor/select2/i18n/ps.js'
Deleting 'admin/js/vendor/select2/i18n/th.js'
Deleting 'admin/js/vendor/select2/i18n/zh-CN.js'
Deleting 'admin/js/vendor/select2/i18n/hy.js'
Deleting 'admin/js/vendor/select2/i18n/km.js'
Deleting 'admin/js/vendor/select2/i18n/dsb.js'
Deleting 'admin/js/vendor/select2/i18n/ne.js'
Deleting 'admin/js/vendor/select2/i18n/ja.js'
Deleting 'admin/js/vendor/select2/i18n/pl.js'
Deleting 'admin/js/vendor/select2/i18n/cs.js'
Deleting 'admin/js/vendor/select2/i18n/ca.js'
Deleting 'admin/js/vendor/select2/i18n/eu.js'
Deleting 'admin/js/vendor/select2/i18n/mk.js'
Deleting 'admin/js/vendor/select2/i18n/lt.js'
Deleting 'admin/js/vendor/select2/i18n/pt-BR.js'
Deleting 'admin/js/vendor/select2/i18n/gl.js'
Deleting 'admin/js/vendor/select2/i18n/hi.js'
Deleting 'admin/js/vendor/select2/i18n/zh-TW.js'
Deleting 'admin/js/vendor/select2/i18n/sr-Cyrl.js'
Deleting 'admin/js/vendor/select2/i18n/nb.js'
Deleting 'admin/js/vendor/xregexp/LICENSE.txt'
Deleting 'admin/js/vendor/xregexp/xregexp.js'
Deleting 'admin/js/vendor/xregexp/xregexp.min.js'
Deleting 'admin/js/admin/DateTimeShortcuts.js'
Deleting 'admin/js/admin/RelatedObjectLookups.js'
Deleting 'css/noctis-dashboard-style.css'
Deleting 'css/dicom-viewer-buttons.css'
Deleting 'css/noctis-global.css'
Deleting 'js/worklist-button-handlers.js'
Deleting 'js/button-utils.js'
Deleting 'js/dicom-viewer-utils.js'
Deleting 'js/vendor/three/OrbitControls.js'
Deleting 'js/vendor/three/three.min.js'

171 static files copied to '/workspace/staticfiles'.
[0;34m[INFO][0m Skipping admin user creation (no authentication system)
[0;32m[SUCCESS][0m Django setup completed
[1m[0;34m🚀 Starting Application Services[0m
[0;34m[INFO][0m Stopping existing processes...
[0;34m[INFO][0m Starting Daphne ASGI server...
[0;34m[INFO][0m Waiting for Daphne to initialize...
[0;32m[SUCCESS][0m Daphne started successfully (PID: 5626)
[0;34m[INFO][0m Starting ngrok with dynamic domain...
[0;34m[INFO][0m Ngrok started (dynamic domain)
[1m[0;34m✅ Validating Deployment[0m
[0;32m[SUCCESS][0m Daphne process running
[0;32m[SUCCESS][0m Application responding to HTTP requests
[1;33m[WARNING][0m Ngrok tunnel not running (optional)
[0;32m[SUCCESS][0m No errors in application logs
[0;32m[SUCCESS][0m ✅ All validations passed!
[1m[0;34m🎉 DEPLOYMENT SUCCESSFUL![0m

[0;32m[SUCCESS][0m Application Details:
  • Local URL: http://localhost:8000
  • Admin URL: http://localhost:8000/admin/
  • Admin User: admin / admin123
  • Logs: tail -f logs/*.log
  • Stop: ./stop_production_improved.sh

[0;32m[SUCCESS][0m Deployment completed successfully at Mon Sep  1 02:45:37 PM UTC 2025
[0;32m[SUCCESS][0m Zero errors encountered! 🎯
