{% extends 'base.html' %}

{% block title %}Login - Noctis Pro PACS{% endblock %}
{% block extra_css %}
<style>
    .login-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; background: var(--dark-bg); }
    .login-card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; padding: 2rem; width: 100%; max-width: 420px; box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
    .logo { color: var(--accent-color); font-weight: 800; letter-spacing: 0.5px; display: flex; align-items: center; gap: 10px; justify-content: center; margin-bottom: 12px; }
    .subtitle { color: var(--text-secondary); text-align: center; margin-bottom: 20px; }
    .form-control { background: rgba(255,255,255,0.05); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 10px; padding: 12px 14px; }
    .form-control:focus { background: rgba(255,255,255,0.08); border-color: var(--accent-color); box-shadow: 0 0 0 3px rgba(0,212,255,0.1); color: var(--text-primary); }
    .login-btn { width: 100%; border-radius: 10px; padding: 12px 14px; font-weight: 700; border: 1px solid var(--accent-color); background: linear-gradient(135deg, #1f1f1f 0%, #2a2a2a 100%); color: var(--text-primary); }
    .login-btn:hover { border-color: var(--accent-color); box-shadow: 0 0 0 2px rgba(0,212,255,0.1) inset; color: var(--text-primary); }
</style>
{% endblock %}

{% block content %}
{% with True as hide_navbar %}
<div class="login-container">
  <div class="login-card">
    <div class="logo"><i class="fas fa-hospital-symbol"></i> Noctis Pro PACS</div>
    <div class="subtitle">Sign in to continue</div>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}-medical alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    {% endif %}

    <form method="post" id="loginForm">
      {% csrf_token %}
      <div class="mb-3">
        <label class="form-label" for="username">Username</label>
        <input type="text" class="form-control" id="username" name="username" placeholder="Enter username" required autocomplete="username">
      </div>
      <div class="mb-3">
        <label class="form-label" for="password">Password</label>
        <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required autocomplete="current-password">
      </div>
      <button type="submit" class="login-btn" id="loginButton"><i class="fas fa-sign-in-alt me-2"></i>Sign In</button>
    </form>
  </div>
</div>
{% endwith %}
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const loginForm = document.getElementById('loginForm');
  const loginButton = document.getElementById('loginButton');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');

  usernameInput.focus();

  loginForm.addEventListener('submit', function(e) {
    const username = usernameInput.value.trim();
    const password = passwordInput.value;
    if (!username || !password) {
      e.preventDefault();
      return;
    }
    loginButton.disabled = true;
  });
</script>
{% endblock %}